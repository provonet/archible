---
- hosts: all

  vars:
    ansible_python_interpreter: /usr/bin/python2
    hostname: myarchbox
    domain: mydomain.net
    root_password: secret
    locale:
      region: Europe
      city: Amsterdam

  pre_tasks:
  - name: run galaxy
    local_action: command ansible-galaxy install -r requirements.yml --roles-path roles --force
    register: fetch_roles

  tasks:
  - include_role:
      name: arch-bootstrap
      static: no
    ignore_errors: True
    when:
      - fetch_roles.changed

